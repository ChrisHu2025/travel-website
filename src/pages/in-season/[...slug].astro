---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const entries = await getCollection('in-season');
  return entries.map(entry => ({ params: { slug: entry.data.path }, props: { entry } }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={entry.data.title}>
  <article class="bg-white min-h-screen pb-20">
    <div class="relative w-full h-[60vh] lg:h-[80vh] bg-gray-900">
      <img src={entry.data.image} alt={entry.data.title} class="absolute inset-0 w-full h-full object-cover opacity-90" />
      <div class="absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent"></div>
    </div>

    <div class="container mx-auto px-4 max-w-3xl -mt-24 relative z-10">
      <div class="bg-white p-8 md:p-16 shadow-2xl rounded-sm">
        <header class="text-center mb-14 border-b border-gray-100 pb-10">
          <span class="text-xs font-bold tracking-[0.2em] text-indigo-600 uppercase mb-4 block">In Season Now</span>
          <h1 class="text-4xl md:text-6xl font-serif font-bold text-gray-900 mb-8 leading-tight">{entry.data.title}</h1>

          <div class="flex flex-col sm:flex-row justify-center items-center gap-6 sm:gap-12 text-sm font-sans text-gray-600 border-t border-gray-50 pt-8 mt-8">
            <div class="flex items-center gap-2">
              <span class="text-xs font-bold text-gray-400 uppercase tracking-widest">Location</span>
              <span class="font-medium text-gray-900">{entry.data.city}</span>
            </div>
            <div class="flex items-center gap-2">
              <span class="text-xs font-bold text-gray-400 uppercase tracking-widest">Best Time</span>
              <span class="font-medium text-indigo-600">{entry.data.best_season.join(', ')}</span>
            </div>
          </div>
        </header>

        <div class="prose prose-lg prose-indigo mx-auto mb-10 font-serif text-xl leading-relaxed text-gray-600 italic">
          {entry.data.summary}
        </div>

        <div class="prose prose-lg prose-indigo mx-auto font-sans text-gray-800 prose-headings:font-serif">
          <Content />
        </div>
      </div>
    </div>
  </article>
</Layout>
