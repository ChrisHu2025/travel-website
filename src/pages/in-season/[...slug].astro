---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const entries = await getCollection('in-season');
  return entries.map(entry => ({
    params: { slug: entry.data.path },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={entry.data.title}>
  <div class="min-h-screen bg-white">
    <!-- Split Layout Header -->
    <section class="grid grid-cols-1 lg:grid-cols-2 h-auto lg:h-[80vh]">
        <div class="relative h-[50vh] lg:h-auto order-2 lg:order-1">
            <img src={entry.data.image} alt={entry.data.title} class="w-full h-full object-cover" />
        </div>
        <div class="flex flex-col justify-center p-8 lg:p-20 bg-gray-900 text-white order-1 lg:order-2">
            <span class="text-indigo-400 font-bold tracking-wider uppercase mb-4">Seasonal Pick</span>
            <h1 class="text-4xl lg:text-6xl font-serif font-bold mb-6 leading-tight">{entry.data.title}</h1>
            <p class="text-xl text-gray-300 mb-8">{entry.data.summary}</p>

            <div class="grid grid-cols-2 gap-8 border-t border-gray-700 pt-8">
                <div>
                    <span class="block text-gray-500 text-sm uppercase mb-1">Location</span>
                    <span class="font-bold">{entry.data.city}</span>
                </div>
                <div>
                    <span class="block text-gray-500 text-sm uppercase mb-1">Best Season</span>
                    <span class="font-bold text-indigo-400">{entry.data.best_season.join(', ')}</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Content -->
    <section class="py-20 container mx-auto px-4 max-w-3xl">
        <div class="prose prose-lg prose-indigo mx-auto text-gray-700">
            <Content />
        </div>

        <div class="mt-16 pt-8 border-t text-center">
            <a href="/in-season" class="text-indigo-600 font-bold hover:text-indigo-800">‚Üê Back to All Recommendations</a>
        </div>
    </section>
  </div>
</Layout>
